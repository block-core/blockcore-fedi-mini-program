<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Fedi Mod</title>
    <link rel="icon" href="favicon.png" type="image/png">
    <style>
        .output {
            border: 2px solid gray;
            white-space: pre;
        }
    </style>
    <script src="https://unpkg.com/webln@0.3.2/dist/webln.min.js"
        integrity="sha384-MpjpvOQqXz9nCoLUS/sR0bhLwGYuNPMOBN50jsqhnqAzDq0GiOI0u6oC5fHitzI2"
        crossorigin="anonymous"></script>
</head>

<body>
    <button id="action">Trigger</button>
    <div id="output" class="logs"></div>

    <script>
        let webln = null;

        const btn = document.getElementById('action');
        const div = document.getElementById('output');

        btn.addEventListener('click', function () {
            var newDiv = document.createElement('div');
            newDiv.textContent = 'Triggered';
            div.appendChild(newDiv);
        });

        document.addEventListener('DOMContentLoaded', async () => {
            var newDiv = document.createElement('div');
            newDiv.textContent = 'Content loaded';
            document.body.appendChild(newDiv);

            try {
                webln = await WebLN.requestProvider();
                var newDiv = document.createElement('div');
                newDiv.textContent = 'WebLN initialized!';
                document.body.appendChild(newDiv);
            } catch (err) {
                var newDiv = document.createElement('div');
                newDiv.textContent = 'Error: ' + err.message;
                document.body.appendChild(newDiv);
            }
        });

        if (webln) {
            // Call webln functions
        }

    </script>
</body>

</html>